from aiogram import types

from db.db_service import add_or_update_user
from keyboards.inline.create_inline_keyboard import main_menu_inline_keyboard


async def start_command(message: types.Message) -> None:
    """
    –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É —Å—Ç–∞—Ä—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

    :param message: –û–±—ä–µ–∫—Ç Message, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ–æ–±—â–µ–Ω–∏–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ.
    """
    user = message.from_user
    first_name = user.first_name or None
    last_name = user.last_name or None
    username = user.username or None

    # –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è —Å HTML-—Ä–∞–∑–º–µ—Ç–∫–æ–π
    if first_name or last_name:
        greeting = f'–ü—Ä–∏–≤–µ—Ç! <b>{first_name or ""}</b> <b>{last_name or ""}</b>'
    else:
        greeting = '–ü—Ä–∏–≤–µ—Ç! –î–æ–±—Ä—ã–π —á–µ–ª–æ–≤–µ–∫!'

    # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
    await message.answer(
        f'{greeting}\n'
        f'üé¨ <b>–ö–∏–Ω–æ–ë–æ—Ç</b> ‚Äî —Ç–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –≥–∏–¥ –ø–æ –º–∏—Ä—É –∫–∏–Ω–æ!\n\n'
        f'üîç <b>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:</b>\n\n'
        f'‚Ä¢ –ü–æ–∏—Å–∫ —Ñ–∏–ª—å–º–æ–≤ –ø—Ä—è–º–æ —Å –ö–∏–Ω–æ–ø–æ–∏—Å–∫–∞ üéûÔ∏è\n'
        f'‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ª—é–±–∏–º—ã—Ö —Ñ–∏–ª—å–º–æ–≤ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ ‚≠ê\n'
        f'‚Ä¢ –ü–æ–∏—Å–∫ –∞–∫—Ç–µ—Ä–æ–≤ –∏ —Ä–µ–∂–∏—Å—Å–µ—Ä–æ–≤ –ø–æ –∏–º–µ–Ω–∏ üë§\n'
        f'‚Ä¢ –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–∫—Ç–µ—Ä–∞—Ö: –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è, –±–∏–æ–≥—Ä–∞—Ñ–∏—è, —Ñ–∏–ª—å–º–æ–≥—Ä–∞—Ñ–∏—è üìö\n'
        f'‚Ä¢ –§–∏–ª—å–º—ã, –≤ –∫–æ—Ç–æ—Ä—ã—Ö —É—á–∞—Å—Ç–≤–æ–≤–∞–ª –≤—ã–±—Ä–∞–Ω–Ω—ã–π –∞–∫—Ç–µ—Ä üé•\n\n'
        f'–ù–∞–π–¥–∏—Ç–µ –Ω–æ–≤—ã–µ —Ñ–∏–ª—å–º—ã, —É–∑–Ω–∞–π—Ç–µ –±–æ–ª—å—à–µ –æ –ª—é–±–∏–º—ã—Ö –∞–∫—Ç–µ—Ä–∞—Ö –∏ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —Å–≤–æ–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –∫–∏–Ω–æ–∏–∑–±—Ä–∞–Ω–Ω–æ–µ ‚Äî –≤—Å–µ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ!',
        parse_mode='HTML',
        reply_markup=main_menu_inline_keyboard()
    )

    await add_or_update_user(user.id, username, first_name, last_name)
